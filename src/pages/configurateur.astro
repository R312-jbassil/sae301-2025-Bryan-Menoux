---
import Layout from "../layouts/Layout.astro";
import CouleursLunettes from "../components/CouleursLunettes.astro";
import Lunettes from "../components/Lunettes.astro";
---

<Layout>
  <main
    style="display: flex; flex-direction: column; align-items: center; gap: 2rem; margin-top: 4rem;"
  >
    <h1>Personnalisez vos lunettes</h1>

    <Lunettes />
    <CouleursLunettes />

    <script is:inline>
      window.addEventListener("changeCouleurLunettes", (e) => {
        const couleur = e.detail.couleur;
        const partie = e.detail.partie;

        if (partie === "monture") {
          const monture = document.getElementById("monture");
          if (monture) {
            monture.style.transition = "fill 0.3s ease";
            monture.setAttribute("fill", couleur);
          }
        } else if (partie === "branches") {
          const branches = document.querySelectorAll("#branches");
          if (branches) {
            branches.forEach((branch) => {
              branch.style.transition = "fill 0.3s ease";
              branch.setAttribute("fill", couleur);
            });
          }
        }
      });
    </script>
  </main>
</Layout>
